/*! jQuery UI Virtual Keyboard Virtual Caret v1.1.6 (beta) */
!function(e){"function"==typeof define&&define.amd?define(["jquery"],e):"object"==typeof module&&"object"==typeof module.exports?module.exports=e(require("jquery")):e(jQuery)}(function(n){"use strict";var b=n.keyboard;b.firefox=void 0!==window.mozInnerScreenX,n.extend(b.css,{caret:"ui-keyboard-caret",caretMirror:"ui-keyboard-mirror-div"}),n.fn.addCaret=function(e){var t={caretClass:"",charAttr:"data-character",charIndex:1,offsetX:0,offsetY:0,adjustHt:0};return this.each(function(){var l,o,i=b.events,u=n(this).data("keyboard");u&&(l=u.caret_options=n.extend({},t,e),o=u.caret_namespace=u.namespace+"caret",u.extensionNamespace.push(o),u.textareaCaretProperties=["direction","boxSizing","width","height","overflowX","overflowY","borderTopWidth","borderRightWidth","borderBottomWidth","borderLeftWidth","borderStyle","paddingTop","paddingRight","paddingBottom","paddingLeft","fontStyle","fontVariant","fontWeight","fontStretch","fontSize","fontSizeAdjust","lineHeight","fontFamily","textAlign","textTransform","textIndent","textDecoration","letterSpacing","wordSpacing","tabSize","MozTabSize"],u.caret_setup=function(){var e=b.css,t="keyup keypress mouseup mouseleave ".split(" ").join(o+" "),r="position:absolute;visibility:hidden;top:-9999em;left:-9999em;white-space:pre-wrap;z-index:-10;"+("INPUT"===u.preview.nodeName?"":"word-wrap:break-word;");u.$keyboard.find("."+e.caretMirror).remove(),u.caret_$div=n('<div class="'+e.caretMirror+'" style="'+r+'">').appendTo(u.$keyboard),u.$caret&&u.$caret.remove(),u.$caret=n('<div class="'+e.caret+" "+l.caretClass+'" style="position:absolute;">').insertAfter(u.$preview),u.$el.unbind(i.kbChange+o).bind(i.kbChange+o,function(){u.findCaretPos()}),u.$preview.unbind(t).bind(t,function(){u.findCaretPos()})},u.findCaretPos=function(){if(u.caret_$div){var t,r,e,o,i,n,a,s,d=u.preview,c=parseFloat(u.$preview.css("fontSize")),p="INPUT"===d.nodeName,f=u.caret_$div[0];t=f.style,r=window.getComputedStyle?getComputedStyle(d,null):d.currentStyle,o=b.caret(u.$preview),i=Math["ltr"===r.direction?"max":"min"](o.start,o.end),u.textareaCaretProperties.forEach(function(e){t[e]=r[e]}),b.firefox&&(t.width=parseInt(r.width,10)-2+"px",d.scrollHeight>parseInt(r.height,10)&&(t.overflowY="scroll")),t.width=parseInt(p?d.scrollWidth:r.width,10)+(p?2*c:0)+"px",f.textContent=d.value.substring(0,i),"INPUT"===d.nodeName&&(f.textContent=f.textContent.replace(/\x20/g," ")),(a=document.createElement("span")).textContent=d.value.substring(i)||"​",f.appendChild(a),o="center"===t.textAlign?c:0,u.caretPos={top:a.offsetTop+parseInt(r.borderTopWidth,10)+l.offsetY,left:a.offsetLeft+parseInt(r.borderLeftWidth,10)+l.offsetX},e=parseInt(u.$caret.css("margin-top"),10),t=Math.round(c+2*e)+l.adjustHt,s=u.$preview.position(),u.$caret.css({top:s.top-d.scrollTop+u.caretPos.top-e,left:s.left-d.scrollLeft+u.caretPos.left,height:t}),n=d.value.substring(i,i+l.charIndex).replace(/\s/," ")||" ",u.$caret.attr(l.charAttr,n)}},u.$el.unbind(o).bind(i.kbBeforeVisible+o,function(){u.caret_setup()}).bind(i.kbVisible+o,function(){u.findCaretPos()}).bind(i.kbHidden+o,function(){var e="keyup keypress mouseup mouseleave ".split(" ").join(o+" ");u.$preview.unbind(e),u.$caret.remove(),u.$caret=null,u.caret_$div=null}),u.options.alwaysOpen&&u.isVisible()&&(u.caret_setup(),u.findCaretPos()))})}});